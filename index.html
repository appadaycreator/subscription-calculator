<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢è¨ˆç®—æ©Ÿ - ç„¡æ–™ã§å¹´é–“6ä¸‡å††ç¯€ç´„</title>
    <meta name="description" content="ã‚µãƒ–ã‚¹ã‚¯ä»£ã‚’å¯è¦–åŒ–ã—ã¦ç„¡é§„ã‚’ç™ºè¦‹ã€‚ä½¿ç”¨é »åº¦ã‹ã‚‰è§£ç´„ã™ã¹ãã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ†æã—ã€å¹´é–“æœ€å¤§6ä¸‡å††ã®ç¯€ç´„ã‚’å®Ÿç¾ã€‚">
    <meta name="keywords" content="ã‚µãƒ–ã‚¹ã‚¯,æ–­æ¨é›¢,ç¯€ç´„,å®¶è¨ˆç°¿,è¨ˆç®—æ©Ÿ,è§£ç´„">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKnSURBVFhH7ZZNaxNBGIafBBu0RbEq9eBFD548ePCgJ1s9ePHgQQ8e9OBBvXjQg54E9eDFgydPnjx4suLJkydPnjx48uTJk6dOnjx58uTJk6c+/QMyb2YzmW2SJmnBBx5mdmdndp7Zd2Y2CYLgPxAEQRAEQRAEQRAEQRAEQfwPRqORAq7rqkajkUokEkqhUFA6nQ5CodAzjuO+xWIxpVKpKJVKRalUKkqlUlEqlYpSqVSUSqWiVCoVpVKpKJVKRalUKkqlUlEqlYpSqVRUu92O6/U6VavVVKVSUeVyWZXL5SS/T09PLxeLxc9er5e+7OzsnOz3+93t7e3fW1tbvzY3N39tb2//3tnZ+b21tfVrd3f39/7+/m/f93/7vv/b8/3fru//8jz/l+f5vzw/+OV5wU/PC356fvDT84OfnhfMet5g1vOCGc8PZjw/mPa8YMrzg0nPC8Y9L3jjusFr1w3GXDcYc93glesGI64bjLhO8NJ1gxeuE7xwHeGF6wgvHEd47jjCc8cRnjuO8MxxhKe2Izx1HeGJ4whPbEd4bDvCY9sRHtmO8Mh2hEe2Izy0HeGh7QgPbEd4YDvCA9sR7tuOcN92hHu2I9yzHeGu7Qh3bUe4YzvCHdsRbtuOcNt2hFu2I9yyHeGm7Qg3bUe4YTvCDdsRrtuOcN12hGu2I1yzHeGq7QhXbUe4YjvCFdsRLtuOcNl2hEu2I1yyHeGi7QgXbUe4YDvCBdsRztuOcN52hHO2I5yzHeGs7QhnbUc4YzvCGdsRTtuOcNp2hFO2I5yyHeGk7QgnbUc4YTvCCdsRjtuOcNx2hGO2Ixy1HeGI7QhHbEc4bDvCYdsRDtmOcNB2hIO2IxywHeGA7Qj7bUfYbzvCPtsR9tmOsNd2hL22I+y1HWGv7Qh7bUfYYzvCHtsRdtuOsNt2hF22I+yyHWGn7Qg7bUfYYTvCDtsRttuOsN12hG22I2yzHWGr7QhbbUfYYjvCFtsRNtuOsNl2hE22I2yyHWGj7QgbbUfYYDvCBtsR1tuOsN52hHW2I6yzHWGt7QhrbUdYYzvCGtsRVtuOsNp2hFW2I6yyHWGl7QgrbUdYYTvCctsRltuOsMx2hKW2Iyy1HWGx7QiLbUdYZDvCItsRFtqOsNB2hAW2IyywHWG+7QjzbUeYZzvCPNsR5tqOsMA0TdM0TdM0TdM0TdM0TdM0TdPstf8C/a7sXgAAAABJRU5ErkJggg==">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .calc-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .ad-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .subscription-form {
            background: #f8f9ff;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-bottom: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-danger {
            background: #dc3545;
        }
        
        .results {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 10px;
        }
        
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .summary-amount {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }
        
        .subscription-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .priority-high {
            border-left-color: #dc3545;
        }
        
        .priority-medium {
            border-left-color: #ffc107;
        }
        
        .priority-low {
            border-left-color: #28a745;
        }
        
        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .share-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            text-decoration: none;
            text-align: center;
        }
        
        .share-twitter {
            background: #1da1f2;
        }
        
        .share-line {
            background: #00c300;
        }
        
        .share-facebook {
            background: #1877f2;
        }
        
        .history {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .affiliate-note {
            font-size: 0.8rem;
            color: #666;
            margin-top: 10px;
        }
        
        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .share-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="container">
        <div class="header">
            <h1>ğŸ’° ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢è¨ˆç®—æ©Ÿ</h1>
            <p>å¹´é–“6ä¸‡å††ã®ç¯€ç´„ã‚‚å¯èƒ½ï¼ã‚ãªãŸã®ã‚µãƒ–ã‚¹ã‚¯ä»£ã‚’è¦‹ç›´ãã†</p>
        </div>
        
        <div class="main-content">
            <div class="calc-section">
                <h2>ğŸ“± å¥‘ç´„ä¸­ã®ã‚µãƒ–ã‚¹ã‚¯ã‚’å…¥åŠ›</h2>
                
                <div class="subscription-form">
                    <div class="input-group">
                        <label for="serviceName">ã‚µãƒ¼ãƒ“ã‚¹å</label>
                        <input type="text" id="serviceName" placeholder="ä¾‹: Netflix, Spotify">
                    </div>
                    
                    <div class="input-group">
                        <label for="monthlyFee">æœˆé¡æ–™é‡‘ï¼ˆå††ï¼‰</label>
                        <input type="number" id="monthlyFee" placeholder="ä¾‹: 1,980">
                    </div>
                    
                    <div class="input-group">
                        <label for="usageFreq">æœˆã®åˆ©ç”¨å›æ•°</label>
                        <input type="number" id="usageFreq" placeholder="ä¾‹: 15">
                    </div>
                    
                    <div class="input-group">
                        <label for="satisfaction">æº€è¶³åº¦ï¼ˆ1-5ï¼‰</label>
                        <select id="satisfaction">
                            <option value="1">1 - å…¨ãæº€è¶³ã—ã¦ã„ãªã„</option>
                            <option value="2">2 - ã‚ã¾ã‚Šæº€è¶³ã—ã¦ã„ãªã„</option>
                            <option value="3" selected>3 - æ™®é€š</option>
                            <option value="4">4 - æº€è¶³ã—ã¦ã„ã‚‹</option>
                            <option value="5">5 - éå¸¸ã«æº€è¶³ã—ã¦ã„ã‚‹</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="addSubscription()">ã‚µãƒ–ã‚¹ã‚¯ã‚’è¿½åŠ </button>
                </div>
                
                <div id="results" class="results" style="display: none;">
                    <div class="summary-card">
                        <h3>ğŸ“Š åˆ†æçµæœ</h3>
                        <div>æœˆé¡åˆè¨ˆ: <span id="totalMonthly" class="summary-amount">Â¥0</span></div>
                        <div>å¹´é¡åˆè¨ˆ: <span id="totalYearly" class="summary-amount">Â¥0</span></div>
                        <div>ç¯€ç´„å¯èƒ½é¡: <span id="savingsPotential" class="summary-amount">Â¥0</span></div>
                    </div>
                    
                    <div id="subscriptionList"></div>
                    
                    <div class="share-buttons">
                        <a href="#" class="share-btn share-twitter" onclick="shareTwitter()">Xã§ã‚·ã‚§ã‚¢</a>
                        <a href="#" class="share-btn share-line" onclick="shareLine()">LINEã§ã‚·ã‚§ã‚¢</a>
                        <button class="btn btn-secondary" onclick="compareWithFriends()">å‹é”ã¨æ¯”è¼ƒ</button>
                    </div>
                </div>
                
                <button class="btn btn-danger" onclick="clearAll()" style="display: none;" id="clearBtn">å…¨ã¦ã‚¯ãƒªã‚¢</button>
            </div>
            
            <div class="sidebar">
                <!-- A8.net ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆ -->
                <div class="ad-section">
                    <h3>ğŸ’¡ ãŠã™ã™ã‚ç¯€ç´„ã‚µãƒ¼ãƒ“ã‚¹</h3>
                    <p><strong>ãƒãƒãƒ¼ãƒ•ã‚©ãƒ¯ãƒ¼ãƒ‰ ME</strong></p>
                    <p>å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã§æ”¯å‡ºã‚’è‡ªå‹•åˆ†æï¼ã‚µãƒ–ã‚¹ã‚¯ç®¡ç†ã‚‚ç°¡å˜ã«ã€‚</p>
                    <a href="#" class="btn" style="font-size: 0.9rem; padding: 10px;">è©³ç´°ã‚’è¦‹ã‚‹</a>
                    <div class="affiliate-note">â€»ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆåºƒå‘Š</div>
                </div>
                
                <!-- Amazon ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆ -->
                <div class="ad-section">
                    <h3>ğŸ“š ç¯€ç´„æœ¬ã®ãŠã™ã™ã‚</h3>
                    <p><strong>ãŠé‡‘ã®å¤§å­¦</strong></p>
                    <p>ä¸¡å­¦é•·ãŒæ•™ãˆã‚‹ã€Œè²¯ã‚ã‚‹ãƒ»ç¨¼ããƒ»å¢—ã‚„ã™ãƒ»å®ˆã‚‹ãƒ»ä½¿ã†ã€ã®å®Ÿè·µæ–¹æ³•</p>
                    <a href="#" class="btn" style="font-size: 0.9rem; padding: 10px;">Amazonã§è¦‹ã‚‹</a>
                    <div class="affiliate-note">â€»Amazon ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆ</div>
                </div>
                
                <!-- æ¥½å¤©ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆ -->
                <div class="ad-section">
                    <h3>ğŸª æ¥½å¤©çµŒæ¸ˆåœã§ç¯€ç´„</h3>
                    <p><strong>æ¥½å¤©ã‚«ãƒ¼ãƒ‰</strong></p>
                    <p>å¹´ä¼šè²»ç„¡æ–™ã§ãƒã‚¤ãƒ³ãƒˆé‚„å…ƒç‡1%ï¼æ¥½å¤©å¸‚å ´ã§ã®ãŠè²·ã„ç‰©ãŒãŠå¾—ã«ã€‚</p>
                    <a href="#" class="btn" style="font-size: 0.9rem; padding: 10px;">æ¥½å¤©ã§ç”³ã—è¾¼ã¿</a>
                    <div class="affiliate-note">â€»æ¥½å¤©ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆ</div>
                </div>
            </div>
        </div>
        
        <div class="history">
            <h3>ğŸ“ˆ è¨ˆç®—å±¥æ­´</h3>
            <div id="historyList">
                <p>ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚µãƒ–ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦åˆ†æã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼</p>
            </div>
        </div>
    </div>

    <script>
        let subscriptions = [];
        let history = JSON.parse(localStorage.getItem('subscriptionHistory') || '[]');
        
        function addSubscription() {
            const serviceName = document.getElementById('serviceName').value;
            const monthlyFee = parseFloat(document.getElementById('monthlyFee').value);
            const usageFreq = parseInt(document.getElementById('usageFreq').value);
            const satisfaction = parseInt(document.getElementById('satisfaction').value);
            
            if (!serviceName || !monthlyFee || !usageFreq) {
                alert('å…¨ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
            
            const costPerUse = monthlyFee / usageFreq;
            const priority = calculatePriority(monthlyFee, usageFreq, satisfaction);
            
            subscriptions.push({
                serviceName,
                monthlyFee,
                usageFreq,
                satisfaction,
                costPerUse,
                priority,
                yearlyFee: monthlyFee * 12
            });
            
            // ãƒ•ã‚©ãƒ¼ãƒ ã‚¯ãƒªã‚¢
            document.getElementById('serviceName').value = '';
            document.getElementById('monthlyFee').value = '';
            document.getElementById('usageFreq').value = '';
            document.getElementById('satisfaction').value = '3';
            
            updateResults();
            saveToHistory();
        }
        
        function calculatePriority(monthlyFee, usageFreq, satisfaction) {
            const costPerUse = monthlyFee / usageFreq;
            const score = (costPerUse * 0.4) + ((6 - satisfaction) * monthlyFee * 0.3) + (monthlyFee * 0.3);
            
            if (score > 2000) return 'high';
            if (score > 1000) return 'medium';
            return 'low';
        }
        
        function updateResults() {
            const totalMonthly = subscriptions.reduce((sum, sub) => sum + sub.monthlyFee, 0);
            const totalYearly = totalMonthly * 12;
            
            // è§£ç´„å„ªå…ˆåº¦ã®é«˜ã„ã‚µãƒ¼ãƒ“ã‚¹ã®ç¯€ç´„å¯èƒ½é¡ã‚’è¨ˆç®—
            const highPriorityServices = subscriptions.filter(sub => sub.priority === 'high');
            const savingsPotential = highPriorityServices.reduce((sum, sub) => sum + sub.yearlyFee, 0);
            
            document.getElementById('totalMonthly').textContent = `Â¥${totalMonthly.toLocaleString()}`;
            document.getElementById('totalYearly').textContent = `Â¥${totalYearly.toLocaleString()}`;
            document.getElementById('savingsPotential').textContent = `Â¥${savingsPotential.toLocaleString()}`;
            
            displaySubscriptions();
            document.getElementById('results').style.display = 'block';
            document.getElementById('clearBtn').style.display = 'block';
        }
        
        function displaySubscriptions() {
            const sortedSubs = [...subscriptions].sort((a, b) => {
                const priorityOrder = { high: 3, medium: 2, low: 1 };
                return priorityOrder[b.priority] - priorityOrder[a.priority];
            });
            
            const listHTML = sortedSubs.map(sub => `
                <div class="subscription-item priority-${sub.priority}">
                    <div>
                        <strong>${sub.serviceName}</strong><br>
                        æœˆé¡: Â¥${sub.monthlyFee.toLocaleString()} | 
                        åˆ©ç”¨å›æ•°: ${sub.usageFreq}å› | 
                        1å›ã‚ãŸã‚Š: Â¥${Math.round(sub.costPerUse)}<br>
                        <small>æº€è¶³åº¦: ${sub.satisfaction}/5 | 
                        è§£ç´„å„ªå…ˆåº¦: ${sub.priority === 'high' ? 'é«˜' : sub.priority === 'medium' ? 'ä¸­' : 'ä½'}</small>
                    </div>
                    <div>
                        <button class="btn btn-danger" style="padding: 5px 10px; font-size: 0.8rem;" 
                                onclick="removeSubscription('${sub.serviceName}')">å‰Šé™¤</button>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('subscriptionList').innerHTML = listHTML;
        }
        
        function removeSubscription(serviceName) {
            subscriptions = subscriptions.filter(sub => sub.serviceName !== serviceName);
            if (subscriptions.length === 0) {
                document.getElementById('results').style.display = 'none';
                document.getElementById('clearBtn').style.display = 'none';
            } else {
                updateResults();
            }
            saveToHistory();
        }
        
        function clearAll() {
            subscriptions = [];
            document.getElementById('results').style.display = 'none';
            document.getElementById('clearBtn').style.display = 'none';
            saveToHistory();
        }
        
        function shareTwitter() {
            const totalYearly = subscriptions.reduce((sum, sub) => sum + (sub.monthlyFee * 12), 0);
            const highPriorityServices = subscriptions.filter(sub => sub.priority === 'high');
            const savingsPotential = highPriorityServices.reduce((sum, sub) => sum + sub.yearlyFee, 0);
            
            const text = `å¹´é–“ã‚µãƒ–ã‚¹ã‚¯ä»£: Â¥${totalYearly.toLocaleString()}
ç¯€ç´„å¯èƒ½é¡: Â¥${savingsPotential.toLocaleString()}

ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢ã§å®¶è¨ˆã‚’è¦‹ç›´ãã†ï¼
#ç¶™ç¶šã¯åŠ›ãªã‚Š #ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢ #ç¯€ç´„ #å®¶è¨ˆç®¡ç†`;
            
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`;
            window.open(url, '_blank');
        }
        
        function shareLine() {
            const totalYearly = subscriptions.reduce((sum, sub) => sum + (sub.monthlyFee * 12), 0);
            const text = `å¹´é–“ã‚µãƒ–ã‚¹ã‚¯ä»£: Â¥${totalYearly.toLocaleString()}ã§ã—ãŸï¼
ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢è¨ˆç®—æ©Ÿã§å®¶è¨ˆã‚’è¦‹ç›´ã—ã¦ã¿ã‚ˆã†`;
            const url = `https://social-plugins.line.me/lineit/share?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(text)}`;
            window.open(url, '_blank');
        }
        
        function compareWithFriends() {
            const totalYearly = subscriptions.reduce((sum, sub) => sum + (sub.monthlyFee * 12), 0);
            const compareText = `ç§ã®å¹´é–“ã‚µãƒ–ã‚¹ã‚¯ä»£ã¯Â¥${totalYearly.toLocaleString()}ã§ã—ãŸï¼
ã‚ãªãŸã¯ã©ã®ãã‚‰ã„ï¼Ÿä¸€ç·’ã«è¨ˆç®—ã—ã¦ã¿ã‚ˆã†ï¼

${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ã‚µãƒ–ã‚¹ã‚¯æ–­æ¨é›¢è¨ˆç®—æ©Ÿ',
                    text: compareText,
                    url: window.location.href
                });
            } else {
                navigator.clipboard.writeText(compareText).then(() => {
                    alert('æ¯”è¼ƒç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼');
                });
            }
        }
        
        function saveToHistory() {
            const now = new Date();
            const totalMonthly = subscriptions.reduce((sum, sub) => sum + sub.monthlyFee, 0);
            const totalYearly = totalMonthly * 12;
            
            if (totalYearly > 0) {
                history.unshift({
                    date: now.toLocaleDateString('ja-JP'),
                    totalYearly,
                    subscriptionCount: subscriptions.length
                });
                
                // æœ€æ–°10ä»¶ã®ã¿ä¿æŒ
                history = history.slice(0, 10);
                localStorage.setItem('subscriptionHistory', JSON.stringify(history));
            }
            
            updateHistoryDisplay();
        }
        
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (history.length === 0) {
                historyList.innerHTML = '<p>ã¾ã å±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã‚µãƒ–ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦åˆ†æã‚’é–‹å§‹ã—ã¾ã—ã‚‡ã†ï¼</p>';
                return;
            }
            
            const historyHTML = history.map(record => `
                <div class="subscription-item">
                    <div>
                        <strong>${record.date}</strong><br>
                        å¹´é–“åˆè¨ˆ: Â¥${record.totalYearly.toLocaleString()} | 
                        ã‚µãƒ¼ãƒ“ã‚¹æ•°: ${record.subscriptionCount}å€‹
                    </div>
                </div>
            `).join('');
            
            historyList.innerHTML = historyHTML;
        }
        
        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å±¥æ­´ã‚’è¡¨ç¤º
        updateHistoryDisplay();
        
        // Google Analytics ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡
        function sendAnalyticsEvent(action, category = 'Subscription Calculator') {
            if (typeof gtag !== 'undefined') {
                gtag('event', action, {
                    event_category: category,
                    event_label: action
                });
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ 
        document.getElementById('serviceName').addEventListener('input', () => {
            sendAnalyticsEvent('service_name_input');
        });
    </script>
</body>
</html>